<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/admin/images/icon.png" height="50px" width="50px" type="image/x-icon">
    <title>Verification</title>
    <link rel="icon" href="http://localhost:8001/favicon/favicon.ico" type="image/x-icon">

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- DataTables -->
    <link rel="stylesheet" href="/admin/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="/admin/css/responsive.bootstrap4.min.css">
    <link rel="stylesheet" href="/admin/css/buttons.bootstrap4.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
        integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <!-- Select2 -->
    <!--<link rel="stylesheet" href="/admin/plugins/select2/css/select2.min.css">-->
    <!--<link rel="stylesheet" href="/admin/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css">-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="/admin/css/adminlte.min.css">
    <link rel="stylesheet" href="/admin/css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        integrity="sha384-LC/U0QNwBE2Afb3tQ8E7tZ4DlN9sBEZ2L4a9xv2tHc8egP3Wqas76qQV4DEtvU2n" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');

        tfoot {
            display: none;
        }

        .nav-sidebar .nav-item.active .nav-link {
            background-color: #ffffff;
            /* Change this to your desired active link background color */
            color: #000000;
            /* Change this to your desired active link text color */
        }

        .btn-primary {
            background-color: black;
        }

        .btn-primary:hover {
            background-color: white;
            color: black;
        }

        .page-item.active .page-link {
            z-index: 3;
            color: #fff;
            background-color: black;
            border-color: #007bff;
        }

        .page-item .page-link {
            color: black;
        }

        .active-tab {
            background-color: black;
            color: white;
        }

        .nav-pills .nav-link.active,
        .nav-pills .show>.nav-link {
            color: #fff;
            background-color: black;
        }

        .nav-pills .nav-link:hover,
        .nav-pills .show>.nav-link:hover {
            color: #fff !important;
        }

        .custom-map-control-button {
            padding: 14px;
        }

        .right {
            float: right !important
        }

        .sidebar-dark-primary {
            background-color: white;
        }

        [class*="sidebar-dark-"] .sidebar a {
            color: rgb(255, 255, 255);
        }

        .nav-item:hover {
            background-color: linear-gradient(to right, #ffffff, #e43603, #fa7199, #e85a19);
            color: white;
            border-bottom: 2px solid white;
        }

        .sidebar-dark-primary .nav-sidebar>.nav-item>.nav-link.active,
        .sidebar-light-primary .nav-sidebar>.nav-item>.nav-link.active {
            background-color: rgb(255, 255, 255);
            color: rgb(0, 0, 0) !important;

                {
                    {
                    !-- border-radius: 10px;
                    --
                }
            }
        }

        [class*="sidebar-dark-"] .nav-sidebar>.nav-item.menu-open>.nav-link,
        [class*="sidebar-dark-"] .nav-sidebar>.nav-item:hover>.nav-link,
        [class*="sidebar-dark-"] .nav-sidebar>.nav-item>.nav-link:focus {
            background-image: linear-gradient(to right, #2E0366, #1400FF, #006AFF, #FFFFFF);
            color: #fff !important;
        }

        .sidebar {
            padding-top: 2px;
            padding-bottom: 30px;
        }

        .card-header {
            background-color: #ebf6f8;
        }

        .brand-image {
            border-bottom: 1px solid black;
        }

        .buttons-html5 {
            padding: 5px 8px !important;
        }

        .btn {
            margin-bottom: 3px;
        }

        .bg-info {
            background-color: black !important;
            color: white !important;
        }

        .bg-info:hover {
            background-color: white !important;
            color: black !important;
        }

        .btn-success {
            background-color: black;
            color: white;
        }

        .btn-success:hover {
            background-color: white;
            color: black;
            border-color: black;
        }

        .humburger-menu:hover {
            color: white !important;
        }

        .col-sm-6 h1 {
            color: white !important;
        }

        /* Added style for centering */
        .center-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
    </style>
</head>

<body>
    <div class="row">
        <div class="col-md-4 offset-md-4" style="margin-top: 160px;">
            <div class="card">
                <div class="card-header d-flex justify-content-center p-3"
                    style="background-color:  #555 color:white;">
                    <h1 class="card-title"><strong>Verify OTP</strong></h1>
                </div>
                <div class="alert-success">{{success}}</div>
                <div class="alert-danger">{{error}}</div>
                <form class="form-horizontal" action="/auth/verifyotp" method="post">
                    <div class="card-body">
                        <div class="form-group row">
                            <label for="inputEmail3" class="col-sm-2 col-form-label">Email:</label>
                            <div class="col-sm-10">
                                <div style="margin-top: 7px;"><b
                                        style="color: #555 margin-top: 100px;">{{Email}}</b></div>
                                <input type="hidden" name="email" value="{{Email}}">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="inputEmail3" class="col-sm-2 col-form-label">OTP:</label>
                            <div class="col-sm-10 d-flex align-items-center">
                                <input type="text" name="otp" required class="form-control" id="otp"
                                    placeholder="ENTER OTP" pattern="\d*" maxlength="4">
                                <button type="button" class="btn btn-info"
                                    style="background-color: #555 color: white"
                                    id="resendBtn">Resend</button>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer d-flex justify-content-center">
                        <button type="submit" style="background-color: #555 color: white"
                            class="btn btn-info">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>

<script>
    $(document).ready(function () {
        // Hide success and error messages after 3 seconds
        setTimeout(function () {
            $('.alert-success').fadeOut('slow');
        }, 3000);

        setTimeout(function () {
            $('.alert-danger').fadeOut('slow');
        }, 3000);

        // Resend OTP functionality
        $('#resendBtn').on('click', function () {
            const email = $('input[name="email"]').val(); // Get email value from hidden input

            // Disable the button and hide it
            $(this).prop('disabled', true);
            $(this).fadeOut();

            // Send OTP request
            $.ajax({
                url: '/auth/sendotp',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({ email: email }), // Send email in the request body
                success: function (response) {
                    // Handle success response
                    $('.alert-success').text('OTP sent successfully to ' + email).fadeIn('slow');
                    // Hide success message after 3 seconds
                    setTimeout(function () {
                        $('.alert-success').fadeOut('slow');
                    }, 3000);
                },
                error: function (xhr, status, error) {
                    // Handle error response
                    $('.alert-danger').text('Error sending OTP: ' + error).fadeIn('slow');
                    // Hide error message after 3 seconds
                    setTimeout(function () {
                        $('.alert-danger').fadeOut('slow');
                    }, 3000);
                }
            });

            // Make the button visible again and enable it after 10 seconds
            setTimeout(function () {
                $('#resendBtn').fadeIn().prop('disabled', false);
            }, 10000); // 10 seconds delay
        });
    });

    document.getElementById('otp').addEventListener('input', function (e) {
        this.value = this.value.replace(/\D/g, '').slice(0, 4);
    });
</script>



</html>